CREATE TABLE "status" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "status" NOT NULL varchar
  "is_archived" BOOLEAN DEFAULT FALSE;
);

CREATE TABLE "notes" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" varchar,
  "body" text,
  "status_id" NOT NULL INT REFERENCES status(id) ON DELETE SET NULL,
  "created_at" TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  "updated_at" TIMESTAMP WITH TIME ZONE
);

CREATE TABLE "notes_status" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "notes_id" INT REFERENCES notes(id), 
  "status_id" INT REFERENCES status(id),
  "changed_at" TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);